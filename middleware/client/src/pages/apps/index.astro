---
import Layout from "../../layouts/Layout.astro";
// import App from "../../components/Apps/App.astro";

import type { AppModel } from "../../models/App";
import NavBar from "../../components/NavBar/NavBar.astro"
import mdwApi from "../../utils/mdwApi";
import CreateApp from "../../components/Apps/CreateApp";
import Apps from "../../components/Apps"

async function fetchApps():Promise<AppModel[]> {
    try {
        const response = await mdwApi.get("apps/");
        return response.data;
    } catch {
        console.log("OpenSearch failed connection");
        return [];
    }
}
const apps = await fetchApps();
---

<Layout title="Apps">
    <NavBar/>
    <!-- <main class="container mx-auto px-4">
        <h1>Apps</h1>
        <section>
            <Apps apps={apps} client:idle/>
        </section>
        <section class="mt-2 flex flex-col justify-center w-full">
            <h2>Create App</h2>
            <CreateApp client:idle />
        </section>
    </main> -->
    <Apps client:idle/>
</Layout>
